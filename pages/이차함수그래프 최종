import streamlit as st
import numpy as np
import matplotlib.pyplot as plt

# ğŸ¨ ë°°ê²½ìƒ‰ì„ RGB(203,147,160)ìœ¼ë¡œ ì§€ì •
st.markdown(
    """
    <style>
    body {
        background-color: rgb(203, 147, 160);
    }
    .stApp {
        background-color: rgb(203, 147, 160);
    }
    </style>
    """,
    unsafe_allow_html=True
)

st.title("ğŸ’— ìœ ë¦¬í•¨ìˆ˜ì˜ ê·¸ë˜í”„ì™€ í‰í–‰ì´ë™ (ë””ì§€í„¸ êµê³¼ì„œ)")

st.markdown("""
ì´ ë‹¨ì›ì—ì„œëŠ” **ìœ ë¦¬í•¨ìˆ˜**ì˜ ê·¸ë˜í”„ê°€ ì–´ë–»ê²Œ ë³€í•˜ëŠ”ì§€ë¥¼ í•™ìŠµí•©ë‹ˆë‹¤.  
ê³µí†µìˆ˜í•™ êµê³¼ì„œì˜ ë‚´ìš©ì„ í† ëŒ€ë¡œ, ì§ì ‘ ê·¸ë˜í”„ë¥¼ ì¡°ì‘í•˜ë©´ì„œ í•¨ìˆ˜ì˜ íŠ¹ì§•ì„ íƒêµ¬í•´ ë´…ì‹œë‹¤.
""")

# ------------------------
# 1ï¸âƒ£ y = a/x ê·¸ë˜í”„ í•™ìŠµ
# ------------------------
st.header("1ï¸âƒ£ í•¨ìˆ˜ y = a/x ì˜ ê·¸ë˜í”„")

st.markdown("""
- ê¸°ë³¸í˜• **y = a/x** ëŠ” ì¤‘ì‹¬ì´ ì›ì ì¸ ìŒê³¡ì„ ì…ë‹ˆë‹¤.  
- **a**ì˜ ë¶€í˜¸ì™€ í¬ê¸°ì— ë”°ë¼ ê·¸ë˜í”„ì˜ ëª¨ì–‘ì´ ë‹¬ë¼ì§‘ë‹ˆë‹¤.
""")

a = st.slider("a ê°’ ì¡°ì ˆ", -5.0, 5.0, 1.0, 0.1)
x = np.linspace(-10, 10, 400)
y = np.where(x != 0, a/x, np.nan)

fig, ax = plt.subplots()
ax.plot(x, y, label=f"y = {a}/x")
ax.axhline(0, color='black', linewidth=1)
ax.axvline(0, color='black', linewidth=1)
ax.set_xlim(-10, 10)
ax.set_ylim(-10, 10)
ax.set_aspect('equal')  # âœ… ê²©ì í¬ê¸° ì¼ì • ìœ ì§€
ax.grid(True)
ax.legend()
st.pyplot(fig)

st.markdown("""
ğŸ‘‰ **ê´€ì°°:**  
- a > 0ì´ë©´ 1, 3ì‚¬ë¶„ë©´ì— ê·¸ë˜í”„ê°€ ìˆìŠµë‹ˆë‹¤.  
- a < 0ì´ë©´ 2, 4ì‚¬ë¶„ë©´ì— ê·¸ë˜í”„ê°€ ìˆìŠµë‹ˆë‹¤.  
- |a|ê°€ ì»¤ì§ˆìˆ˜ë¡ ê·¸ë˜í”„ê°€ ë” ê°€íŒŒë¥´ê²Œ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.
""")

# ------------------------
# 2ï¸âƒ£ y = (ax + b)/(cx + d) ê·¸ë˜í”„
# ------------------------
st.header("2ï¸âƒ£ í•¨ìˆ˜ y = (ax + b) / (cx + d)ì˜ ê·¸ë˜í”„")

st.markdown("""
ì´ë²ˆì—ëŠ” ë¶„ëª¨ì™€ ë¶„ìê°€ ëª¨ë‘ 1ì°¨ì‹ì¸ ìœ ë¦¬í•¨ìˆ˜ë¥¼ í•™ìŠµí•´ ë´…ì‹œë‹¤.  
ë‹¨, **c â‰  0**ì´ì–´ì•¼ í•˜ë©°, ë¶„ëª¨ê°€ 0ì´ ë˜ëŠ” xê°’ì—ì„œëŠ” ê·¸ë˜í”„ê°€ ëŠì–´ì§‘ë‹ˆë‹¤.
""")

a2 = st.slider("a", -5.0, 5.0, 1.0, 0.1)
b2 = st.slider("b", -10.0, 10.0, 0.0, 0.5)
c2 = st.slider("c (0 ì œì™¸)", -5.0, 5.0, 1.0, 0.1)
if c2 == 0:
    st.warning("âš ï¸ cì˜ ê°’ì´ 0ì´ ë  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ìë™ìœ¼ë¡œ 0.1ë¡œ ì„¤ì •ë©ë‹ˆë‹¤.")
    c2 = 0.1
d2 = st.slider("d", -10.0, 10.0, 0.0, 0.5)

x2 = np.linspace(-10, 10, 400)
y2 = np.where((c2 * x2 + d2) != 0, (a2 * x2 + b2) / (c2 * x2 + d2), np.nan)

fig2, ax2 = plt.subplots()
ax2.plot(x2, y2, label=f"y = ({a2}x + {b2}) / ({c2}x + {d2})")
ax2.axhline(0, color='black', linewidth=1)
ax2.axvline(0, color='black', linewidth=1)
ax2.set_xlim(-10, 10)
ax2.set_ylim(-10, 10)
ax2.set_aspect('equal')
ax2.grid(True)
ax2.legend()
st.pyplot(fig2)

st.markdown("""
ğŸ‘‰ **ê·¸ë˜í”„ íŠ¹ì§• ì •ë¦¬**
- ìˆ˜ì§ì ê·¼ì„  : cx + d = 0 â†’ x = -d/c  
- ìˆ˜í‰ì ê·¼ì„  : y = a/c  
- y = a/x ê·¸ë˜í”„ë¥¼ **ì´ë™Â·ë³€í˜•í•œ í˜•íƒœ**ë¡œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
""")

# ------------------------
# 3ï¸âƒ£ í•™ìŠµ í™•ì¸ í€´ì¦ˆ
# ------------------------
st.header("3ï¸âƒ£ í•™ìŠµ í™•ì¸ í€´ì¦ˆ")

st.markdown("ê·¸ë˜í”„ì˜ íŠ¹ì§•ì„ ì •í™•íˆ ì´í•´í–ˆëŠ”ì§€ í€´ì¦ˆë¡œ í™•ì¸í•´ ë´…ì‹œë‹¤.")

with st.form("quiz_form"):
    q1 = st.radio("â‘  y = a/x ì—ì„œ aê°€ ìŒìˆ˜ì¼ ë•Œ ê·¸ë˜í”„ëŠ” ì–´ëŠ ì‚¬ë¶„ë©´ì— ìˆë‚˜ìš”?",
                  ["1, 3ì‚¬ë¶„ë©´", "2, 4ì‚¬ë¶„ë©´", "xì¶• ìœ„"], index=None)

    q2 = st.radio("â‘¡ y = (ax + b)/(cx + d) ì—ì„œ ìˆ˜ì§ì ê·¼ì„ ì€ ì–´ë””ì— ìˆë‚˜ìš”?",
                  ["x = -d/c", "y = a/c", "x = 0"], index=None)

    q3 = st.radio("â‘¢ y = (ax + b)/(cx + d) ì˜ ìˆ˜í‰ì ê·¼ì„ ì€?",
                  ["y = a/b", "y = a/c", "y = -d/c"], index=None)

    submit = st.form_submit_button("âœ… ë‹µì•ˆ ì œì¶œ")

if submit:
    score = 0
    if q1 == "2, 4ì‚¬ë¶„ë©´":
        score += 1
    if q2 == "x = -d/c":
        score += 1
    if q3 == "y = a/c":
        score += 1

    st.subheader(f"ğŸ¯ ê²°ê³¼: {score}/3 ì ")

    if score == 3:
        st.success("ì™„ë²½í•©ë‹ˆë‹¤! ìœ ë¦¬í•¨ìˆ˜ì˜ í‰í–‰ì´ë™ê³¼ ì ê·¼ì„ ì„ ì •í™•íˆ ì´í•´í–ˆìŠµë‹ˆë‹¤.")
    elif score == 2:
        st.info("ì¢‹ì•„ìš”! í•œ ë¬¸ì œë§Œ ë” ë³µìŠµí•´ ë´…ì‹œë‹¤.")
    else:
        st.warning("ì¡°ê¸ˆ ë” ë³µìŠµì´ í•„ìš”í•´ìš”. ê·¸ë˜í”„ ë³€í™”ë¥¼ ë‹¤ì‹œ ê´€ì°°í•´ ë³´ì„¸ìš”.")

# ------------------------
# ë§ˆë¬´ë¦¬
# ------------------------
st.markdown("""
---
âœ… **ì •ë¦¬**
- y = a/x ëŠ” ì¤‘ì‹¬ì´ ì›ì ì¸ ê¸°ë³¸ ìœ ë¦¬í•¨ìˆ˜ì…ë‹ˆë‹¤.  
- y = (ax + b)/(cx + d)ëŠ” ì ê·¼ì„ ì´ ì´ë™í•œ í˜•íƒœì…ë‹ˆë‹¤.  
- ìˆ˜ì§ì ê·¼ì„ ê³¼ ìˆ˜í‰ì ê·¼ì„ ì„ í†µí•´ ê·¸ë˜í”„ì˜ ìœ„ì¹˜ì™€ ëª¨ì–‘ì„ íŒŒì•…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ğŸ’¡ **í™œë™ ì œì•ˆ:**  
a, b, c, d ê°’ì„ ë°”ê¿”ë³´ë©° ì ê·¼ì„ ì´ ì–´ë–»ê²Œ ë³€í•˜ëŠ”ì§€ ì§ì ‘ í™•ì¸í•´ ë³´ì„¸ìš”!
""")
