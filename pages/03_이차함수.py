import streamlit as st
import numpy as np
import matplotlib.pyplot as plt

st.set_page_config(page_title="ì´ì°¨í•¨ìˆ˜ì˜ ê·¸ë˜í”„ ì´ë™ í•™ìŠµ", layout="centered")

st.title("ğŸ“ˆ ì´ì°¨í•¨ìˆ˜ y = a(x - p)Â² + q ê·¸ë˜í”„ì˜ íŠ¹ì§• í•™ìŠµ ì•±")
st.write("ì´ ì•±ì€ ì´ì°¨í•¨ìˆ˜ì˜ **í‘œì¤€í˜• ê·¸ë˜í”„**ê°€ `p`ì™€ `q` ê°’ì— ë”°ë¼ ì–´ë–»ê²Œ ì´ë™í•˜ëŠ”ì§€ë¥¼ ì‹œê°ì ìœ¼ë¡œ í•™ìŠµí•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.")

st.divider()

# 1ï¸âƒ£ Step 1: y = a(x - p)Â² ê·¸ë˜í”„ì—ì„œ pì˜ ë³€í™” ê´€ì°°
st.header("1ï¸âƒ£ p ê°’ì´ ë³€í•  ë•Œ ê·¸ë˜í”„ì˜ ì´ë™")
st.write("ì•„ë˜ ìŠ¬ë¼ì´ë”ë¡œ **p** ê°’ì„ ë°”ê¾¸ë©° ê·¸ë˜í”„ê°€ xì¶• ë°©í–¥ìœ¼ë¡œ ì–´ë–»ê²Œ ì´ë™í•˜ëŠ”ì§€ ê´€ì°°í•˜ì„¸ìš”.")

a1 = st.slider("a ê°’ (ê¸°ìš¸ê¸°/í­ ì¡°ì ˆ)", -2.0, 2.0, 1.0, 0.1)
p1 = st.slider("p ê°’ (xì¶• ì´ë™)", -5.0, 5.0, 0.0, 0.5)

x = np.linspace(-10, 10, 400)
y1 = a1 * (x - p1)**2

fig1, ax1 = plt.subplots()
ax1.plot(x, y1, label=f"y = {a1}(x - {p1})Â²")
ax1.plot(x, a1 * x**2, "--", label="ê¸°ì¤€ y = aÂ·xÂ²", color="gray")
ax1.legend()
ax1.grid(True)
ax1.set_xlabel("x")
ax1.set_ylabel("y")
st.pyplot(fig1)

st.info("ğŸ‘‰ pê°€ ì–‘ìˆ˜ì¼ ë•ŒëŠ” **ì˜¤ë¥¸ìª½ìœ¼ë¡œ**, ìŒìˆ˜ì¼ ë•ŒëŠ” **ì™¼ìª½ìœ¼ë¡œ** ê·¸ë˜í”„ê°€ ì´ë™í•©ë‹ˆë‹¤.")

st.divider()

# 2ï¸âƒ£ Step 2: y = aÂ·xÂ² + q ê·¸ë˜í”„ì—ì„œ qì˜ ë³€í™” ê´€ì°°
st.header("2ï¸âƒ£ q ê°’ì´ ë³€í•  ë•Œ ê·¸ë˜í”„ì˜ ì´ë™")
st.write("ì´ë²ˆì—ëŠ” **q** ê°’ì„ ë°”ê¾¸ë©° yì¶• ë°©í–¥ ì´ë™ì„ í™•ì¸í•´ ë´…ì‹œë‹¤.")

a2 = st.slider("a ê°’ (ê¸°ìš¸ê¸°/í­ ì¡°ì ˆ, q ì´ë™ìš©)", -2.0, 2.0, 1.0, 0.1, key="a2")
q2 = st.slider("q ê°’ (yì¶• ì´ë™)", -5.0, 5.0, 0.0, 0.5)

y2 = a2 * x**2 + q2

fig2, ax2 = plt.subplots()
ax2.plot(x, y2, label=f"y = {a2}xÂ² + {q2}")
ax2.plot(x, a2 * x**2, "--", label="ê¸°ì¤€ y = aÂ·xÂ²", color="gray")
ax2.legend()
ax2.grid(True)
ax2.set_xlabel("x")
ax2.set_ylabel("y")
st.pyplot(fig2)

st.info("ğŸ‘‰ qê°€ ì–‘ìˆ˜ì¼ ë•ŒëŠ” **ìœ„ë¡œ**, ìŒìˆ˜ì¼ ë•ŒëŠ” **ì•„ë˜ë¡œ** ê·¸ë˜í”„ê°€ ì´ë™í•©ë‹ˆë‹¤.")

st.divider()

# 3ï¸âƒ£ Step 3: y = a(x - p)Â² + q ì—ì„œ pì™€ q ë™ì‹œ ì¡°ì‘
st.header("3ï¸âƒ£ pì™€ që¥¼ ë™ì‹œì— ë°”ê¿”ë³´ë©° ì „ì²´ ì´ë™ í™•ì¸")
st.write("ì´ì œ pì™€ që¥¼ í•¨ê»˜ ì¡°ì ˆí•´, ê·¸ë˜í”„ê°€ ì–´ë–»ê²Œ í‰í–‰ì´ë™í•˜ëŠ”ì§€ ì‚´í´ë´…ì‹œë‹¤.")

a3 = st.slider("a ê°’", -2.0, 2.0, 1.0, 0.1, key="a3")
p3 = st.slider("p ê°’", -5.0, 5.0, 0.0, 0.5, key="p3")
q3 = st.slider("q ê°’", -5.0, 5.0, 0.0, 0.5, key="q3")

y3 = a3 * (x - p3)**2 + q3

fig3, ax3 = plt.subplots()
ax3.plot(x, y3, label=f"y = {a3}(x - {p3})Â² + {q3}")
ax3.plot(x, a3 * x**2, "--", label="ê¸°ì¤€ y = aÂ·xÂ²", color="gray")
ax3.legend()
ax3.grid(True)
ax3.set_xlabel("x")
ax3.set_ylabel("y")
st.pyplot(fig3)

st.info(f"ğŸ‘‰ ê¼­ì§“ì ì€ ({p3}, {q3})ì— ìœ„ì¹˜í•©ë‹ˆë‹¤.")

st.divider()

# 4ï¸âƒ£ Step 4: ê°œë… í™•ì¸ í€´ì¦ˆ
st.header("4ï¸âƒ£ í€´ì¦ˆë¡œ ê°œë… í™•ì¸í•˜ê¸° ğŸ¯")

st.write("ë‹¤ìŒ ì¤‘ ì˜³ì€ ì„¤ëª…ì„ ëª¨ë‘ ê³ ë¥´ì„¸ìš”.")
quiz_options = st.multiselect(
    "ì´ì°¨í•¨ìˆ˜ì˜ ê·¸ë˜í”„ ì´ë™ì— ëŒ€í•œ ì„¤ëª…:",
    [
        "pê°€ ì»¤ì§ˆìˆ˜ë¡ ê·¸ë˜í”„ëŠ” ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì´ë™í•œë‹¤.",
        "qê°€ ì»¤ì§ˆìˆ˜ë¡ ê·¸ë˜í”„ëŠ” ì•„ë˜ë¡œ ì´ë™í•œë‹¤.",
        "pê°€ ìŒìˆ˜ì´ë©´ ê·¸ë˜í”„ëŠ” ì™¼ìª½ìœ¼ë¡œ ì´ë™í•œë‹¤.",
        "qê°€ ìŒìˆ˜ì´ë©´ ê·¸ë˜í”„ëŠ” ìœ„ë¡œ ì´ë™í•œë‹¤.",
        "ê¼­ì§“ì ì˜ ì¢Œí‘œëŠ” (p, q)ì´ë‹¤."
    ]
)

if st.button("ì •ë‹µ í™•ì¸"):
    correct = {"pê°€ ì»¤ì§ˆìˆ˜ë¡ ê·¸ë˜í”„ëŠ” ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì´ë™í•œë‹¤.",
               "pê°€ ìŒìˆ˜ì´ë©´ ê·¸ë˜í”„ëŠ” ì™¼ìª½ìœ¼ë¡œ ì´ë™í•œë‹¤.",
               "ê¼­ì§“ì ì˜ ì¢Œí‘œëŠ” (p, q)ì´ë‹¤."}
    if set(quiz_options) == correct:
        st.success("ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰ ê·¸ë˜í”„ ì´ë™ ê°œë…ì„ ì™„ë²½íˆ ì´í•´í•˜ì…¨êµ°ìš”.")
    else:
        st.error("ì•„ì‰½ìŠµë‹ˆë‹¤. ë‹¤ì‹œ í•œ ë²ˆ ê·¸ë˜í”„ ì´ë™ì„ ê´€ì°°í•˜ë©° ë³µìŠµí•´ë³´ì„¸ìš”.")
